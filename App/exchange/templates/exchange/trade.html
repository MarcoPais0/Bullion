{% extends "exchange/base.html" %}
{% load static %}

{% block title %}
    Trade - Bullion
{% endblock %}

{% block body %}
    <div class="page-header"></div>

    {% if message %}
        <div class="message">{{ message }}</div>
    {% endif %}

    <div class="content" style="display: flex; flex-direction: row;">

        <div class="left-30">
            <h3 style="margin: 0 0 20px 0;">Price</h3>
            <h4 style="margin: 0 0 40px 0;" id="cur0"></h4>
            <h3 style="margin: 0 0 20px 0;">Owned</h3>
            <h4 style="margin: 0 0 20px 0;"><img id="currency_img" src="" alt="" width="30px" height="30px" style="margin-right: 10px;"> {{ available }}</h4>
            <h4 style="margin: 0 0 50px 0;"><img src="{% static 'img/usd.png' %}" alt="" width="30px" height="30px" style="margin-right: 10px;"> {{ fiat }}</h4>
            <form style="margin: auto auto 50px auto;" action="" method="post">
                {% csrf_token %}
                <div class="form-group">
                    <input type="number" id="cur1" name="cur_price" step=".000001" hidden="true">
                    <input type="text" id="sym1" name="symbol" hidden="true">
                    <input type="text" id="name1" name="name" hidden="true">
                    <input type="text" id="img1" name="image" hidden="true">
                    <input autofocus class="form-control" type="number" id="buy_amount" name="buy_amount" placeholder="Buy Amount" step=".000001" min="0" value="0">
                    <input style="background-color: var(--gray2); border: none;" class="form-control" type="text" id="value1" disabled="true" value="Value: 0">
                </div>
                <div class="form-group" style="margin-top: 10px;">
                    <input class="btn btn-primary" type="submit" value="Buy">
                </div>
            </form>

            <form style="margin: auto;" action="" method="post">
                {% csrf_token %}
                <div class="form-group">
                    <input type="number" id="cur2" name="cur_price" step=".000001" hidden="true">
                    <input type="text" id="sym2" name="symbol" hidden="true">
                    <input type="text" id="name2" name="name" hidden="true">
                    <input type="text" id="img2" name="image" hidden="true">
                    <input autofocus class="form-control" type="number" id="sell_amount" name="sell_amount" placeholder="Sell Amount" step=".000001" min="0" value="0">
                    <input style="background-color: var(--gray2); border: none;" class="form-control" type="text" id="value2" disabled="true" value="Value: 0">
                </div>
                <div class="form-group" style="margin-top: 10px;">
                    <input class="btn btn-primary" type="submit" value="Sell">
                </div>
            </form>
        </div>

        <div class="tradingview-widget-container right-70">
            <div id="tradingview_e0046" style="margin-top: 0;"></div>
            <div class="tradingview-widget-copyright">
                <a id="link" href="https://www.tradingview.com/symbols/BTCUSD/?exchange=Binance" rel="noopener" target="_blank">
                    <span id="description" class="blue-text">BTCUSD Chart</span>
                </a> by TradingView
            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
    <script src="{% static 'js/tradingview.js' %}"></script>
    <script src="{% static 'js/trade.js' %}"></script>
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
{% endblock %}